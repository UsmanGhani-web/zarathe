<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZaraTherapy | Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;}
        body{
            font-family:"Nunito",sans-serif;
            background:linear-gradient(to bottom right,#f6fbfb,#d4ede8);
        }
        header{padding:12px 20px;display:flex;align-items:center;justify-content:center;}
        header img{height:45px;margin-right:10px;}
        header a{color:#007f5f;text-decoration:none;font-size:1.6rem;font-weight:bold;font-family:"Montserrat",sans-serif;}
        header sub{font-size:0.7rem;font-style:italic;}
        #sidebar { 
            transition: transform 0.3s ease; 
        }
        .sidebar-btn.active { 
            background-color: #ecece9 !important; 
            color: #007f5f !important; 
        }
        input, select, textarea { 
            background-color: #f8f8f8; 
            color: #0B3D2E; 
            border: 1px solid #007f5f; 
        }
        input:focus, select:focus, textarea:focus { 
            outline: 2px solid #007f5f; 
        }
        button { 
            transition: 0.3s; 
        }
        .fade { 
            transition: opacity .4s ease; 
        }
        .password-container {
            position: relative;
        }
        .toggle-password {
            position: absolute;
            right: 12px;
            top: 38px;
            background: none;
            border: none;
            cursor: pointer;
            color: #666;
            z-index: 10;
            padding: 8px;
        }
        .toggle-password:hover {
            color: #007f5f;
        }
    </style>
</head>
<body class="bg-[#f6fbfb]">

    <!-- Header -->
    <header class="bg-white shadow-sm">
        <img src="logohere.png" alt="Logo" />
        <a href="index.html">ZARA<sub>t</sub><sub>h</sub><sub>e</sub><sub>r</sub><sub>a</sub><sub>p</sub><sub>i</sub><sub>s</sub><sub>t</sub></a>
    </header>

    <!-- Mobile Header -->
    <div class="md:hidden flex justify-between items-center p-4 bg-[#007f5f] border-b border-[#007f5f]">
     
        <button id="hamburgerBtn" class="text-2xl text-BLACK">&#9776;</button>
    </div>

    <div class="flex">

        <!-- Sidebar -->
        <aside id="sidebar" class="fixed md:relative top-0 left-0 w-64 bg-[#007f5f] text-white min-h-screen p-6 space-y-4 shadow-xl transform -translate-x-full md:translate-x-0 z-50 border-r border-[#007f5f]">
            <h2 class="text-2xl font-semibold hidden md:block mb-4 text-white">ZaraTherapy</h2>

            <button data-section="profile" class="sidebar-btn w-full text-left px-4 py-2 rounded bg-[#005a46] text-white">Profile</button>
            <button data-section="edit" class="sidebar-btn w-full text-left px-4 py-2 rounded text-white hover:bg-[#005a46]">Edit Profile</button>
            <button data-section="book" class="sidebar-btn w-full text-left px-4 py-2 rounded text-white hover:bg-[#005a46]">Book Therapist</button>
            <button data-section="appointments" class="sidebar-btn w-full text-left px-4 py-2 rounded text-white hover:bg-[#005a46]">Appointments</button>

            <hr class="my-4 border-white/30">

            <button id="logoutBtn" class="w-full text-left px-4 py-2 rounded bg-red-600 hover:bg-red-700 transition text-white">Logout</button>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-4 md:p-8 md:ml-0 space-y-10">
            <!-- Profile Section -->
            <section id="profile" class="block">
                <div class="bg-white p-6 rounded-2xl shadow-lg flex flex-col md:flex-row items-center gap-6 text-gray-800 border border-[#007f5f]">
                    <img id="displayPhoto" src="https://via.placeholder.com/150" class="w-40 h-40 rounded-full object-cover shadow-md border-4 border-[#007f5f]"/>
                    <div class="flex-1">
                        <h2 id="displayName" class="text-3xl font-semibold text-gray-800">Loading...</h2>
                        <p id="displayEmail" class="text-gray-600 mt-2"></p>
                        <p id="displayPhone" class="text-gray-600"></p>
                        <p id="displayBio" class="text-gray-600 mt-3"></p>
                        <button id="changePhotoBtn" class="mt-5 px-5 py-2 bg-[#007f5f] text-white rounded hover:bg-[#005a46] transition">Change Profile Photo</button>
                    </div>
                </div>
            </section>

            <!-- Edit Profile Section -->
            <section id="edit" class="hidden">
                <div class="bg-white p-6 rounded-2xl shadow-lg space-y-4 text-gray-800 border border-[#007f5f]">
                    <h2 class="text-2xl font-semibold text-gray-800">Edit Profile</h2>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 mb-2">Full Name</label>
                            <input id="name" type="text" placeholder="Full Name" class="w-full p-3 rounded border border-[#007f5f] focus:ring-2 focus:ring-[#007f5f]">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Email</label>
                            <input id="email" type="email" placeholder="Email" class="w-full p-3 rounded border border-[#007f5f] focus:ring-2 focus:ring-[#007f5f]">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Phone</label>
                            <input id="phone" type="text" placeholder="Phone" class="w-full p-3 rounded border border-[#007f5f] focus:ring-2 focus:ring-[#007f5f]">
                        </div>
                    </div>

                    <div>
                        <label class="block text-gray-700 mb-2">Bio</label>
                        <textarea id="bio" placeholder="Write your bio..." class="w-full p-3 rounded border border-[#007f5f] h-32 focus:ring-2 focus:ring-[#007f5f]"></textarea>
                    </div>

                    <!-- Password Update Section -->
                    <div class="mt-6 pt-6 border-t border-[#007f5f]">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Update Password</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="password-container">
                                <label class="block text-gray-700 mb-2">Current Password</label>
                                <input id="currentPassword" type="password" placeholder="Current Password" class="w-full p-3 pr-10 rounded border border-[#007f5f] focus:ring-2 focus:ring-[#007f5f]">
                                <button class="toggle-password" type="button" data-target="currentPassword">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="password-container">
                                <label class="block text-gray-700 mb-2">New Password</label>
                                <input id="newPassword" type="password" placeholder="New Password" class="w-full p-3 pr-10 rounded border border-[#007f5f] focus:ring-2 focus:ring-[#007f5f]">
                                <button class="toggle-password" type="button" data-target="newPassword">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <button id="updatePasswordBtn" class="px-6 py-2 bg-[#007f5f] text-white rounded hover:bg-[#005a46] transition">Update Password</button>
                            <p id="passwordMessage" class="text-green-600 font-semibold opacity-0 fade mt-3"></p>
                        </div>
                    </div>

                    <div class="flex items-center gap-4 mt-6">
                        <img id="editPhoto" src="https://via.placeholder.com/150" class="w-24 h-24 rounded-full border-4 border-[#007f5f] cursor-pointer"/>
                        <button id="editPhotoBtn" class="px-4 py-2 bg-[#007f5f] text-white rounded hover:bg-[#005a46] transition">Change Photo</button>
                    </div>

                    <button id="saveProfileBtn" class="px-6 py-2 mt-5 bg-[#007f5f] text-white rounded hover:bg-[#005a46] transition">Save Changes</button>
                    <p id="saveMessage" class="text-green-600 font-semibold opacity-0 fade mt-3">Profile Updated ✔</p>
                </div>
            </section>

            <!-- Book Therapist Section -->
            <section id="book" class="hidden">
                <div class="bg-white p-6 rounded-xl shadow-lg w-full max-w-md space-y-4 mx-auto text-gray-800 border border-[#007f5f]">
                    <h2 class="text-2xl font-semibold mb-4 text-gray-800">Book a Therapist</h2>

                    <div>
                        <label class="block text-gray-700 mb-2">Therapist Name</label>
                        <select id="therapist" class="w-full p-3 rounded border border-[#007f5f] text-gray-800 focus:ring-2 focus:ring-[#007f5f]">
                            <option value="">Select Therapist</option>
                            <option value="Dr. Sara|Psychologist|$50|Green Clinic">Dr. Sara</option>
                            <option value="Dr. Ahmed|Psychiatrist|$70|City Hospital">Dr. Ahmed</option>
                            <option value="Dr. Ayesha|Counselor|$40|Wellness Center">Dr. Ayesha</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-gray-700 mb-2">Date</label>
                        <input type="date" id="date" class="w-full p-3 rounded border border-[#007f5f] text-gray-800 focus:ring-2 focus:ring-[#007f5f]">
                    </div>

                    <div>
                        <label class="block text-gray-700 mb-2">Time</label>
                        <input type="time" id="time" class="w-full p-3 rounded border border-[#007f5f] text-gray-800 focus:ring-2 focus:ring-[#007f5f]">
                    </div>

                    <button id="bookAppointmentBtn" class="w-full p-3 bg-[#007f5f] text-white font-semibold rounded hover:bg-[#005a46] mt-2">Book Now</button>
                    <p id="bookMsg" class="text-green-600 font-semibold opacity-0 transition-opacity mt-2">Booked Successfully ✔</p>
                </div>
            </section>

            <!-- Appointments Section -->
            <section id="appointments" class="hidden">
                <div class="bg-white p-6 rounded-2xl shadow-lg text-gray-800 border border-[#007f5f]">
                    <h2 class="text-2xl font-semibold mb-4 text-gray-800">Appointments History</h2>
                    <ul id="appointmentList" class="space-y-3"></ul>
                    <p id="noAppointments" class="text-gray-500 italic">No appointments booked yet.</p>
                </div>
            </section>

        </main>
    </div>

    <!-- Hidden File Input -->
    <input id="profilePhotoInput" type="file" accept="image/*" class="hidden" />

    <!-- Logout Popup -->
    <div id="logoutPopup" class="fixed inset-0 bg-black bg-opacity-50 hidden justify-center items-center z-50">
        <div class="bg-white p-6 rounded-2xl w-80 text-center shadow-xl text-gray-800 border border-[#007f5f]">
            <h3 class="text-xl font-semibold mb-4 text-gray-800">Logout?</h3>
            <div class="flex justify-center gap-4">
                <button id="confirmLogout" class="px-5 py-2 bg-red-600 rounded hover:bg-red-700 text-white">Yes</button>
                <button id="cancelLogout" class="px-5 py-2 bg-gray-400 rounded hover:bg-gray-500 text-gray-800">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const sidebar = document.getElementById("sidebar");
        const hamburgerBtn = document.getElementById("hamburgerBtn");
        const sidebarButtons = document.querySelectorAll(".sidebar-btn");
        const sectionButtons = document.querySelectorAll("[data-section]");
        const sections = document.querySelectorAll("main section");
        const profilePhotoInput = document.getElementById("profilePhotoInput");
        const changePhotoBtn = document.getElementById("changePhotoBtn");
        const editPhotoBtn = document.getElementById("editPhotoBtn");
        const saveProfileBtn = document.getElementById("saveProfileBtn");
        const bookAppointmentBtn = document.getElementById("bookAppointmentBtn");
        const logoutBtn = document.getElementById("logoutBtn");
        const confirmLogout = document.getElementById("confirmLogout");
        const cancelLogout = document.getElementById("cancelLogout");
        const logoutPopup = document.getElementById("logoutPopup");
        const updatePasswordBtn = document.getElementById("updatePasswordBtn");
        const togglePasswordButtons = document.querySelectorAll(".toggle-password");

        // Initialize user data
        function initializeUserData() {
            // Check if user data exists, if not create from login data
            if (!localStorage.getItem("userData")) {
                // Check if we have login data
                const loginData = localStorage.getItem("loginData");
                let userData;
                
                if (loginData) {
                    // Use the login data for the profile
                    const login = JSON.parse(loginData);
                    userData = {
                        name: login.name || "John Doe",
                        email: login.email || "johndoe@example.com",
                        phone: login.phone || "+1 (555) 123-4567",
                        bio: "Welcome to my profile! I'm excited to start my therapy journey with ZaraTherapy.",
                        photo: "https://via.placeholder.com/150",
                        password: login.password || "password123" // In a real app, this should be hashed
                    };
                } else {
                    // Check if we have signup data
                    const signupData = localStorage.getItem("signupData");
                    if (signupData) {
                        const signup = JSON.parse(signupData);
                        userData = {
                            name: signup.name || "John Doe",
                            email: signup.email || "johndoe@example.com",
                            phone: signup.phone || "+1 (555) 123-4567",
                            bio: "Welcome to my profile! I'm excited to start my therapy journey with ZaraTherapy.",
                            photo: "https://via.placeholder.com/150",
                            password: signup.password || "password123"
                        };
                    } else {
                        // Default data if no login or signup data
                        userData = {
                            name: "John Doe",
                            email: "johndoe@example.com",
                            phone: "+1 (555) 123-4567",
                            bio: "Welcome to my profile! I'm excited to start my therapy journey with ZaraTherapy.",
                            photo: "https://via.placeholder.com/150",
                            password: "password123" // In a real app, this should be hashed
                        };
                    }
                }
                
                localStorage.setItem("userData", JSON.stringify(userData));
            }
            
            // Initialize appointments if not exists
            if (!localStorage.getItem("appointments")) {
                localStorage.setItem("appointments", JSON.stringify([]));
            }
        }

        // Load user profile data
        function loadProfile() {
            // First check if we have updated data from login or signup
            const loginData = localStorage.getItem("loginData");
            const signupData = localStorage.getItem("signupData");
            let userData = JSON.parse(localStorage.getItem("userData"));
            
            // Update with latest login/signup data if available
            if (loginData) {
                const login = JSON.parse(loginData);
                userData.email = login.email || userData.email;
                userData.password = login.password || userData.password;
                // Note: Login might not have name and phone, so we keep existing ones
            }
            
            if (signupData) {
                const signup = JSON.parse(signupData);
                userData.name = signup.name || userData.name;
                userData.email = signup.email || userData.email;
                userData.phone = signup.phone || userData.phone;
                userData.password = signup.password || userData.password;
            }
            
            // Save updated user data
            localStorage.setItem("userData", JSON.stringify(userData));
            
            // Update profile section
            document.getElementById("displayName").textContent = userData.name;
            document.getElementById("displayEmail").textContent = userData.email;
            document.getElementById("displayPhone").textContent = userData.phone;
            document.getElementById("displayBio").textContent = userData.bio;
            document.getElementById("displayPhoto").src = userData.photo;
            
            // Update edit section
            document.getElementById("name").value = userData.name;
            document.getElementById("email").value = userData.email;
            document.getElementById("phone").value = userData.phone;
            document.getElementById("bio").value = userData.bio;
            document.getElementById("editPhoto").src = userData.photo;
        }

        // Save profile data
        function saveProfile() {
            const userData = {
                name: document.getElementById("name").value,
                email: document.getElementById("email").value,
                phone: document.getElementById("phone").value,
                bio: document.getElementById("bio").value,
                photo: document.getElementById("editPhoto").src,
                password: JSON.parse(localStorage.getItem("userData")).password // Keep existing password
            };
            
            // Save updated user data (replaces old data)
            localStorage.setItem("userData", JSON.stringify(userData));
            
            // Update loginData if it exists
            const loginData = localStorage.getItem("loginData");
            if (loginData) {
                const login = JSON.parse(loginData);
                login.email = userData.email;
                // Note: We don't update password here as that's handled separately
                localStorage.setItem("loginData", JSON.stringify(login));
            }
            
            // Update zaraUsers array with new data
            updateZaraUsers(userData);
            
            loadProfile();
            showMessage("Profile Updated ✔");
        }

        // Update zaraUsers array with new user data
        function updateZaraUsers(updatedUserData) {
            const users = JSON.parse(localStorage.getItem("zaraUsers")) || [];
            const userIndex = users.findIndex(user => user.email === updatedUserData.email);
            
            if (userIndex !== -1) {
                // Update existing user
                users[userIndex] = {
                    ...users[userIndex],
                    name: updatedUserData.name,
                    email: updatedUserData.email,
                    phone: updatedUserData.phone,
                    bio: updatedUserData.bio,
                    photo: updatedUserData.photo
                    // Note: Password is updated separately in updatePassword function
                };
            } else {
                // Add new user if not found (shouldn't happen normally)
                users.push(updatedUserData);
            }
            
            localStorage.setItem("zaraUsers", JSON.stringify(users));
        }

        // Update password
        function updatePassword() {
            const currentPassword = document.getElementById("currentPassword").value;
            const newPassword = document.getElementById("newPassword").value;
            
            if (!currentPassword || !newPassword) {
                showPasswordMessage("Please fill in both password fields", "red");
                return;
            }
            
            const userData = JSON.parse(localStorage.getItem("userData"));
            
            // Check if current password matches
            if (currentPassword !== userData.password) {
                showPasswordMessage("Current password is incorrect", "red");
                return;
            }
            
            // Update password in userData
            userData.password = newPassword;
            localStorage.setItem("userData", JSON.stringify(userData));
            
            // Update password in loginData
            const loginData = localStorage.getItem("loginData");
            if (loginData) {
                const login = JSON.parse(loginData);
                login.password = newPassword;
                localStorage.setItem("loginData", JSON.stringify(login));
            }
            
            // Update password in zaraUsers array
            const users = JSON.parse(localStorage.getItem("zaraUsers")) || [];
            const userIndex = users.findIndex(user => user.email === userData.email);
            
            if (userIndex !== -1) {
                users[userIndex].password = newPassword;
                localStorage.setItem("zaraUsers", JSON.stringify(users));
            }
            
            // Clear password fields
            document.getElementById("currentPassword").value = "";
            document.getElementById("newPassword").value = "";
            
            showPasswordMessage("Password updated successfully", "green");
        }

        // Update profile photo
        function updateProfilePhoto(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const userData = JSON.parse(localStorage.getItem("userData"));
                userData.photo = e.target.result;
                localStorage.setItem("userData", JSON.stringify(userData));
                
                // Update photo in zaraUsers array
                const users = JSON.parse(localStorage.getItem("zaraUsers")) || [];
                const userIndex = users.findIndex(user => user.email === userData.email);
                
                if (userIndex !== -1) {
                    users[userIndex].photo = e.target.result;
                    localStorage.setItem("zaraUsers", JSON.stringify(users));
                }
                
                loadProfile();
                showMessage("Profile Picture Updated ✔");
            };
            reader.readAsDataURL(file);
        }

        // Book appointment
        function bookAppointment() {
            const therapist = document.getElementById("therapist").value;
            const date = document.getElementById("date").value;
            const time = document.getElementById("time").value;
            
            if (!therapist || !date || !time) {
                alert("Please fill all fields!");
                return;
            }
            
            const [name, specialty, price, clinic] = therapist.split("|");
            const appointment = {
                name,
                specialty,
                price,
                clinic,
                date,
                time
            };
            
            const appointments = JSON.parse(localStorage.getItem("appointments"));
            appointments.push(appointment);
            localStorage.setItem("appointments", JSON.stringify(appointments));
            
            loadAppointments();
            
            // Show success message
            document.getElementById("bookMsg").style.opacity = "1";
            setTimeout(() => {
                document.getElementById("bookMsg").style.opacity = "0";
            }, 2000);
            
            // Reset form
            document.getElementById("therapist").value = "";
            document.getElementById("date").value = "";
            document.getElementById("time").value = "";
        }

        // Load appointments
        function loadAppointments() {
            const appointments = JSON.parse(localStorage.getItem("appointments"));
            const appointmentList = document.getElementById("appointmentList");
            const noAppointments = document.getElementById("noAppointments");
            
            appointmentList.innerHTML = "";
            
            if (appointments.length === 0) {
                noAppointments.style.display = "block";
            } else {
                noAppointments.style.display = "none";
                appointments.forEach(appointment => {
                    const li = document.createElement("li");
                    li.className = "p-3 bg-gray-100 border-l-4 border-[#007f5f] rounded shadow text-gray-800";
                    li.innerHTML = `
                        <strong>${appointment.name}</strong> (${appointment.specialty}) - ${appointment.price}<br>
                        <em>${appointment.clinic}</em><br>
                        Date: ${appointment.date} | Time: ${appointment.time}
                    `;
                    appointmentList.appendChild(li);
                });
            }
        }

        // Show message
        function showMessage(text) {
            const msg = document.getElementById("saveMessage");
            msg.textContent = text;
            msg.style.opacity = "1";
            setTimeout(() => {
                msg.style.opacity = "0";
            }, 2000);
        }

        // Show password message
        function showPasswordMessage(text, color) {
            const msg = document.getElementById("passwordMessage");
            msg.textContent = text;
            msg.style.color = color === "red" ? "#ef4444" : "#16a34a";
            msg.style.opacity = "1";
            setTimeout(() => {
                msg.style.opacity = "0";
            }, 3000);
        }

        // Toggle password visibility
        function togglePasswordVisibility(targetId) {
            const passwordInput = document.getElementById(targetId);
            const toggleButton = document.querySelector(`button[data-target="${targetId}"]`);
            const icon = toggleButton.querySelector('i');
            
            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = "password";
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        // Show section
        function showSection(sectionId) {
            sections.forEach(section => {
                section.classList.add("hidden");
            });
            document.getElementById(sectionId).classList.remove("hidden");
            
            sidebarButtons.forEach(btn => {
                btn.classList.remove("active");
            });
            
            // Find and activate the corresponding button
            const activeBtn = document.querySelector(`[data-section="${sectionId}"]`);
            if (activeBtn) {
                activeBtn.classList.add("active");
            }
        }

        // Toggle sidebar
        function toggleSidebar() {
            if (sidebar.classList.contains("-translate-x-full")) {
                sidebar.classList.remove("-translate-x-full");
                hamburgerBtn.innerHTML = "&times;";
            } else {
                sidebar.classList.add("-translate-x-full");
                hamburgerBtn.innerHTML = "&#9776;";
            }
        }

        // Close sidebar on mobile
        function closeSidebar() {
            if (window.innerWidth < 768) {
                sidebar.classList.add("-translate-x-full");
                hamburgerBtn.innerHTML = "&#9776;";
            }
        }

        // Show logout popup
        function showLogoutPopup() {
            logoutPopup.classList.remove("hidden");
            logoutPopup.classList.add("flex");
        }

        // Close logout popup
        function closeLogoutPopup() {
            logoutPopup.classList.add("hidden");
            logoutPopup.classList.remove("flex");
        }

        // Logout
        function logout() {
            // In a real app, you would clear session data here
            window.location.href = "login.html";
        }

        // Event Listeners
        hamburgerBtn.addEventListener("click", toggleSidebar);
        
        sectionButtons.forEach(button => {
            button.addEventListener("click", function() {
                showSection(this.getAttribute("data-section"));
                closeSidebar();
            });
        });
        
        changePhotoBtn.addEventListener("click", () => profilePhotoInput.click());
        editPhotoBtn.addEventListener("click", () => profilePhotoInput.click());
        profilePhotoInput.addEventListener("change", updateProfilePhoto);
        saveProfileBtn.addEventListener("click", saveProfile);
        bookAppointmentBtn.addEventListener("click", bookAppointment);
        logoutBtn.addEventListener("click", showLogoutPopup);
        confirmLogout.addEventListener("click", logout);
        cancelLogout.addEventListener("click", closeLogoutPopup);
        updatePasswordBtn.addEventListener("click", updatePassword);
        
        // Add event listeners for password toggle buttons
        togglePasswordButtons.forEach(button => {
            button.addEventListener("click", function() {
                togglePasswordVisibility(this.getAttribute("data-target"));
            });
        });

        // Initialize the app
        initializeUserData();
        loadProfile();
        loadAppointments();
        showSection("profile");
    </script>
</body>
</html>